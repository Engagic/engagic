{
  "item": {
    "large": {
      "description": "For complex/lengthy agenda items (100+ pages) - JSON structured output with comprehensive analysis",
      "variables": [
        "title",
        "text"
      ],
      "output_format": "json",
      "response_schema": {
        "type": "object",
        "properties": {
          "summary_markdown": {
            "type": "string",
            "description": "Comprehensive summary in markdown format (5-10 sentences, use sections, bold, lists as needed)"
          },
          "citizen_impact_markdown": {
            "type": "string",
            "description": "2-3 sentences in markdown explaining how this affects residents (can use bold for emphasis)"
          },
          "topics": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "housing",
                "zoning",
                "transportation",
                "budget",
                "public_safety",
                "environment",
                "parks",
                "utilities",
                "economic_development",
                "education",
                "health",
                "planning",
                "permits",
                "contracts",
                "appointments",
                "other"
              ]
            },
            "minItems": 1,
            "maxItems": 3,
            "description": "1-3 main topics from the canonical list only"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "high",
              "medium",
              "low"
            ],
            "description": "Confidence level based on document clarity and completeness"
          }
        },
        "required": [
          "summary_markdown",
          "citizen_impact_markdown",
          "topics",
          "confidence"
        ]
      },
      "system_instruction": "You are an expert at analyzing complex city council agenda items for residents and businesses. Extract all concrete details, cross-reference documents, and explain impact clearly. Use markdown formatting for scannable, actionable information.",
      "template": "Analyze this complex city council agenda item and extract key information.\n\n# Item Title\n\"{title}\"\n\n# Your Task\n\nThis is a COMPLEX, LENGTHY item requiring thorough analysis. Provide a detailed structured JSON response.\n\n# Response Format\n\nReturn valid JSON with these fields:\n- **summary_markdown**: Comprehensive summary (markdown, 5-10 sentences with sections)\n- **citizen_impact_markdown**: How this affects residents (markdown, 2-3 sentences)\n- **topics**: Array of 1-3 canonical topics\n- **confidence**: \"high\", \"medium\", or \"low\"\n\n# Guidelines for Complex Items\n\n## Summary (5-10 sentences, markdown)\n\nBe comprehensive and actionable for complex items:\n\n**Lead with ACTION:**\n- Start with what's happening: \"City Council votes on...\", \"Planning Commission reviews...\"\n- Make the action clear upfront\n\n**Structure for scanning:**\n- Break into sections if needed (## Financial, ## Timeline, ## Details)\n- Use **bold** for key stakeholders (company names, addresses, dollar amounts)\n- Use lists for multiple components\n\n**Include ALL concrete details:**\n- Dollar amounts with context\n- Complete addresses and locations\n- Dates and timelines\n- Ordinance/resolution numbers\n- Names and titles\n\n**Make it scannable:**\n- Plain language, no jargon\n- Bold the numbers that matter\n- If unclear/contradictory, explain the conflict explicitly\n\n## Topics (1-3 from canonical list)\nhousing, zoning, transportation, budget, public_safety, environment, parks, utilities, economic_development, education, health, planning, permits, contracts, appointments, other\n\n## Citizen Impact (2-3 sentences, markdown)\n\nFor complex items, explain immediate and long-term impacts:\n- Direct costs and benefits\n- Service changes\n- Timeline of effects\n- Who is affected most\n- Answer \"so what?\" clearly\n\nUse **bold** to emphasize impact.\n\n## Confidence\n- **high**: Documents are clear, detailed, and consistent despite length\n- **medium**: Some ambiguity, missing context, or minor conflicts\n- **low**: Documents are unclear, contradictory, severely incomplete, or unreadable\n\n# Example: Complex Development\n\nTitle: \"Approval of Oak Street Mixed-Use Development\"\nDocuments: 45-page development agreement, site plans, traffic study, affordable housing plan.\n\nOutput:\n```json\n{\n  \"summary_markdown\": \"City Council votes on 240-unit mixed-use development at **1500 Oak Street** by **Acme Properties**:\\n\\n- 180 market-rate apartments\\n- 60 affordable units (80% AMI)\\n- 15,000 sq ft retail\\n- 320 parking spaces\\n\\nDeveloper pays **$2.4M in impact fees** and builds new traffic signal at Oak/Main intersection. **Timeline:** Groundbreaking Q1 2026, completion Q4 2027. Includes 15-year affordability covenant.\",\n  \"citizen_impact_markdown\": \"Adds **240 housing units (60 affordable)** to downtown and increases retail options, but may worsen traffic on Oak Street until new signal is installed in Q2 2026.\",\n  \"topics\": [\"housing\", \"zoning\", \"transportation\"],\n  \"confidence\": \"high\"\n}\n```\n\n# Attached Documents\n\n{text}\n\n# Remember\n\n- Lead with the action\n- Extract ALL concrete details\n- Bold stakeholders and key numbers\n- Make \"so what?\" clear in citizen impact\n- Use sections and lists for complex items\n- Always use canonical topics from the list\n- Return valid JSON"
    },
    "standard": {
      "description": "For individual agenda items - JSON structured output with markdown fields",
      "variables": [
        "title",
        "text"
      ],
      "output_format": "json",
      "response_schema": {
        "type": "object",
        "properties": {
          "summary_markdown": {
            "type": "string",
            "description": "Main summary in markdown format (1-5 sentences depending on complexity, can use bold, lists, etc.)"
          },
          "citizen_impact_markdown": {
            "type": "string",
            "description": "One sentence in markdown explaining how this affects residents (can use bold for emphasis)"
          },
          "topics": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "housing",
                "zoning",
                "transportation",
                "budget",
                "public_safety",
                "environment",
                "parks",
                "utilities",
                "economic_development",
                "education",
                "health",
                "planning",
                "permits",
                "contracts",
                "appointments",
                "other"
              ]
            },
            "minItems": 1,
            "maxItems": 3,
            "description": "1-3 main topics from the canonical list only"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "high",
              "medium",
              "low"
            ],
            "description": "Confidence level based on document clarity and completeness"
          }
        },
        "required": [
          "summary_markdown",
          "citizen_impact_markdown",
          "topics",
          "confidence"
        ]
      },
      "system_instruction": "You are an expert at analyzing city council agenda items for residents and businesses. Extract concrete details and explain impact in plain, scannable language. Use markdown formatting for clarity.",
      "template": "Analyze this city council agenda item and extract key information.\n\n# Item Title\n\"{title}\"\n\n# Your Task\n\nProvide a structured JSON response with your analysis.\n\n# Response Format\n\nReturn valid JSON with these fields:\n- **summary_markdown**: Main summary (markdown, 1-5 sentences)\n- **citizen_impact_markdown**: How this affects residents (markdown, 1 sentence)\n- **topics**: Array of 1-3 canonical topics\n- **confidence**: \"high\", \"medium\", or \"low\"\n\n# Guidelines\n\n## Summary (1-5 sentences, markdown)\n\n**Lead with ACTION:**\n- Start with what's happening: \"City Council votes on...\", \"Mayor appoints...\", \"Planning Commission reviews...\"\n- Make the action clear upfront\n\n**Length guide:**\n- **Simple items** (appointments, minutes, routine approvals): 1-2 sentences\n- **Medium items** (contracts, small developments): 2-3 sentences  \n- **Complex items** (major developments, budget changes): 4-5 sentences\n\n**Always include:**\n- Dollar amounts, addresses, dates, ordinance numbers\n- Use **bold** for key stakeholders (companies, people, addresses, numbers)\n- Use lists for multiple components\n- Plain language, no jargon\n- If unclear/contradictory, note this explicitly\n\n**Make it scannable:**\n- Bold the names and numbers that matter\n- Answer \"what's happening?\" in first sentence\n- Answer \"so what?\" in citizen impact\n\n## Topics (1-3 from canonical list)\nhousing, zoning, transportation, budget, public_safety, environment, parks, utilities, economic_development, education, health, planning, permits, contracts, appointments, other\n\n**Always use canonical topics only.** Do not create new topic names.\n\n## Citizen Impact (1 sentence, markdown)\n\nHow does this affect residents' lives?\n- Direct costs (taxes, fees, fines)\n- Services (trash, water, roads, parks)\n- Rights and regulations (what you can/can't do)\n- Neighborhood changes (development, traffic, noise)\n- Answer \"so what?\" clearly\n\nUse **bold** to emphasize impact.\n\n## Confidence\n- **high**: Documents are clear, detailed, and consistent\n- **medium**: Some ambiguity, missing context, or minor conflicts\n- **low**: Documents are unclear, contradictory, severely incomplete, or unreadable\n\n# Examples\n\n## Example 1: Simple Appointment\n\nTitle: \"Appointment of Jane Smith to Planning Commission\"\nDocuments: Resolution appointing Jane Smith, term 2025-2029, replacing John Doe.\n\nOutput:\n```json\n{\n  \"summary_markdown\": \"Mayor appoints **Jane Smith** to Planning Commission for **4-year term (2025-2029)**, replacing John Doe whose term expired.\",\n  \"citizen_impact_markdown\": \"New commissioner will vote on **development projects and zoning changes** affecting your neighborhood.\",\n  \"topics\": [\"appointments\"],\n  \"confidence\": \"high\"\n}\n```\n\n## Example 2: Medium Contract\n\nTitle: \"Parks Department Playground Equipment Contract\"\nDocuments: Contract with ABC Equipment Co for $125,000 to replace Central Park playground.\n\nOutput:\n```json\n{\n  \"summary_markdown\": \"City Council votes on **$125,000** contract with **ABC Equipment Co** to replace Central Park playground equipment. Original equipment failed safety inspection in August 2025. Work to be completed by **December 2025**.\",\n  \"citizen_impact_markdown\": \"Central Park playground **currently closed for safety** will reopen by year-end with new equipment.\",\n  \"topics\": [\"parks\", \"contracts\"],\n  \"confidence\": \"high\"\n}\n```\n\n## Example 3: Complex Development\n\nTitle: \"Approval of Oak Street Mixed-Use Development\"\nDocuments: 45-page development agreement, site plans, traffic study, affordable housing plan.\n\nOutput:\n```json\n{\n  \"summary_markdown\": \"City Council votes on 240-unit mixed-use development at **1500 Oak Street** by **Acme Properties**:\\n\\n- 180 market-rate apartments\\n- 60 affordable units (80% AMI)\\n- 15,000 sq ft retail\\n- 320 parking spaces\\n\\nDeveloper pays **$2.4M in impact fees** and builds new traffic signal at Oak/Main intersection. **Timeline:** Groundbreaking Q1 2026, completion Q4 2027.\",\n  \"citizen_impact_markdown\": \"Adds **240 housing units (60 affordable)** to downtown and increases retail options, but may worsen traffic on Oak Street until new signal is installed.\",\n  \"topics\": [\"housing\", \"zoning\", \"transportation\"],\n  \"confidence\": \"high\"\n}\n```\n\n## Example 4: Unclear Documents\n\nTitle: \"Downtown Streetscape Improvements\"\nDocuments: Partial memo, unreadable scanned images.\n\nOutput:\n```json\n{\n  \"summary_markdown\": \"City Council considers downtown streetscape improvements. **Documents incomplete or unreadable** - specific scope, costs, timeline, and contractor information unavailable.\",\n  \"citizen_impact_markdown\": \"**Impact unclear** due to incomplete documentation - may affect downtown accessibility and parking during construction.\",\n  \"topics\": [\"planning\", \"utilities\"],\n  \"confidence\": \"low\"\n}\n```\n\n# Edge Cases\n\n- **Empty/unreadable documents**: confidence=\"low\", note in summary\n- **Title conflicts with content**: Trust content over title, note discrepancy in summary\n- **Multiple contradictory sources**: Explain conflict in summary, confidence=\"medium\"\n- **Purely procedural items**: Still explain what's happening, impact can be \"Administrative matter with **no direct public impact**.\"\n\n# Attached Documents\n\n{text}\n\n# Remember\n\n- Lead with the action (\"City Council votes on...\", \"Mayor appoints...\")\n- Concrete over vague: **\"$2.4M\"** not \"several million\"\n- Specific over general: **\"1500 Oak Street\"** not \"downtown\"\n- Dates over timeframes: **\"December 2025\"** not \"soon\"\n- Bold stakeholders and key numbers\n- Always use canonical topics from the list\n- Make \"so what?\" clear in citizen impact\n- Return valid JSON"
    }
  },
  "meeting": {
    "short_agenda": {
      "description": "FALLBACK: For full meeting packets â‰¤30 pages when item-level processing unavailable. Used when: (1) Vendor doesn't support item extraction, (2) HTML agenda parsing fails, (3) Manual override. Returns plain markdown text (no JSON, no topics). Most cities use item-level processing instead.",
      "variables": [
        "text"
      ],
      "template": "This is a city council meeting agenda. Provide a clear, concise summary that covers:\n\n**Key Agenda Items:**\n- List the main topics/issues being discussed\n- Include any public hearings or votes\n- Note any budget or financial items\n\n**Important Details:**\n- Specific addresses, dollar amounts, ordinance numbers\n- Deadlines or implementation dates\n- Public participation opportunities\n\nKeep it brief but informative. Focus on what citizens need to know.\n\nFormat your response in clean, readable markdown using:\n- ## for section headings\n- Bold for emphasis\n- Bullet lists for items\n- Clear paragraph breaks for readability\n\nAgenda text:\n{text}"
    },
    "comprehensive": {
      "description": "FALLBACK: For large/complex agendas >30 pages when item-level processing unavailable. Same use cases as short_agenda but for complex meetings. Returns plain markdown text (no JSON, no topics). Item-level processing is strongly preferred when available.",
      "variables": [
        "text"
      ],
      "template": "Analyze this city council meeting agenda and provide a comprehensive summary for residents.\n\n**Complete Agenda Items** (list every single one):\n- Item number and full title\n- Complete description of what's being proposed\n- Department or presenter\n- Action required (vote, discussion, information only)\n\n**Financial Details** (every dollar amount):\n- Budget items with exact amounts\n- Contract values and vendors\n- Grant amounts and sources\n- Fee changes or rate adjustments\n\n**Property and Development** (all locations):\n- Complete addresses for any property discussed\n- Zoning changes with current and proposed zoning\n- Development project names and descriptions\n- Square footage, units, or measurements\n\n**Public Participation**:\n- Public hearing items with times\n- Comment period details\n- How to participate (in person, online, written)\n- Deadlines for input\n\n**Key Details to Preserve**:\n- Exact dollar amounts (not \"several million\" but \"$3,456,789\")\n- Complete addresses (not \"downtown\" but \"123 Main Street\")\n- Full names and titles\n- Precise dates and times\n- Ordinance and resolution numbers\n\nBe thorough and detailed. Skip pure administrative items unless they have significant public impact.\n\nFormat your response in clean, readable markdown using:\n- ## for section headings\n- ### for subsections if needed\n- Bold for emphasis\n- Bullet lists for items\n- Clear paragraph breaks for readability\n\nAgenda text:\n{text}"
    }
  }
}
